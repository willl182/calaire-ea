# Problem Record (Troubleshooting)

**Severity**: High (Blocking + 5 Required)

## The Problem

El revisor-fase (subagent `revisor-fase`) identificó 7 hallazgos críticos e importantes en los entregables de la Fase 4 que comprometen la coherencia del plan de implementación del SGC y su ejecución efectiva.

## User-Requested Corrections

Corregir los 7 hallazgos identificados antes de continuar con la Fase 5:
1. Alinear el alcance con el objetivo de 41 documentos
2. Normalizar códigos de formatos para evitar colisiones
3. Corregir dependencias inter-oleadas
4. Ajustar cronograma y Gantt para respetar dependencias
5. Depurar "Recursos Asignados" eliminando documentos no planificados
6. Añadir evidencia verificable en criterios de aceptación
7. Revisar resúmenes de esfuerzo/cantidad

## The Solution / Workaround

**Análisis de Hallazgos:**

**1. [Blocking] Déficit de documentos (37 vs 41):**
- **Causa:** El objetivo de la Fase 4 indica 41 documentos faltantes, pero el backlog y el roadmap solo planifican 37.
- **Riesgo:** Incumplimiento normativo y trazabilidad incompleta.
- **Solución:** Revisar el inventario documental para identificar los 4 documentos faltantes y agregarlos al backlog/roadmap, o ajustar el objetivo formalmente si el cálculo original era incorrecto.

**2. [Required] Inconsistencia de códigos de formatos:**
- **Causa:** Los códigos F-PSEA-01 al F-PSEA-04 se reutilizan tanto en P3 (formatos de competencia y ambiental) como en P4 (formatos de planificación y logística), generando colisiones.
- **Ejemplos:**
  - F-PSEA-01 aparece en P3 (Formato de Registro de Competencia) y P4 (Calendario Tipo)
  - F-PSEA-02 aparece en P3 (Formato de Registro Ambiental) y P4 (Cronograma Detallado)
- **Riesgo:** Control documental inválido, referencias ambiguas, confusión en auditorías.
- **Solución:** Asignar códigos únicos por formato (ej: F-PSEA-05 al F-PSEA-07 para formatos duplicados en P4) y actualizar todas las referencias cruzadas en backlog, roadmap y matriz.

**3. [Required] Dependencias cruzadas entre oleadas:**
- **Causa:** Varios documentos dependen de otros que aún no existen en su oleada:
  - P-PSEA-18 (Oleada 1) depende de P-PSEA-15 (Oleada 2)
  - P-PSEA-23 (Oleada 2) depende de P-PSEA-13 (Oleada 3)
  - P-PSEA-09 (Oleada 1) depende de P-PSEA-06, pero el cronograma y Gantt colocan P-PSEA-09 antes de P-PSEA-06
- **Riesgo:** Dependencias no respetadas reducen factibilidad técnica, especialmente para procedimientos que requieren insumos previos.
- **Solución:** Reorganizar cronograma para que las dependencias se respeten:
  - Mover P-PSEA-06 antes de P-PSEA-09 en Oleada 1
  - Mover P-PSEA-15 a Oleada 1 si P-PSEA-18 lo requiere, o mover P-PSEA-18 a Oleada 2
  - Mover P-PSEA-13 a Oleada 2 si P-PSEA-23 lo requiere, o mover P-PSEA-23 a Oleada 3

**4. [Required] Documentos en "Recursos Asignados" no presentes en backlog:**
- **Causa:** La sección "Recursos Asignados" del roadmap incluye documentos que no existen en el backlog:
  - P-PSEA-32, P-PSEA-33, P-PSEA-35, P-PSEA-36, P-PSEA-37
  - P3-F01, P3-F02, P3-F03, P3-F04, P3-F05, P3-F06, P3-F07
- **Riesgo:** Rompe la trazabilidad, introduce trabajo no planificado, confusión en asignación de recursos.
- **Solución:** Depurar "Recursos Asignados" eliminando estos documentos, o incorporarlos formalmente en backlog y oleadas si corresponden a documentos faltantes del problema #1.

**5. [Required] Resúmenes cuantitativos inflados por colisión de códigos:**
- **Causa:** Los resúmenes de esfuerzo y cantidad suman 37 registros, pero el número de formatos únicos es menor debido a la duplicidad de códigos.
- **Riesgo:** Estimaciones de esfuerzo y cobertura distorsionadas.
- **Solución:** Revisar resúmenes de esfuerzo/cantidad después de la normalización de códigos para asegurar exactitud.

**6. [Suggestions] Criterios de aceptación vagos:**
- **Causa:** Algunos criterios son vagos en verificación ("alineado con plantillas", "integración con CALAIRE-APP") sin indicar evidencia/artefacto de validación.
- **Riesgo:** Dificulta la auditoría de cierre, subjetividad en aprobación.
- **Solución:** Añadir evidencia verificable en criterios de aceptación (ej: "registro de validación en CALAIRE-APP", "acta de aprobación firmada", "screenshot de integración").

**7. [Suggestions] Cronograma sin buffers ni revisión intermedia:**
- **Causa:** El cronograma semanal asume capacidad continua de 6-8h/día por responsable en semanas consecutivas, sin buffers ni revisiones intermedias.
- **Riesgo:** Afecta realismo sin romper la estructura.
- **Solución:** Añadir buffers de tiempo (10-15%) y revisión intermedia al final de cada semana o cada 2 semanas.

## Learnings to Preserve

**Reglas para creación de backlogs y roadmaps en el futuro:**

1. **Coherencia de alcance:** Verificar que el total de documentos planificados coincida con el objetivo declarado. Usar el inventario documental como fuente de verdad.

2. **Unicidad de códigos:** Asegurar que cada documento y formato tenga un código único. Nunca reutilizar códigos en diferentes oleadas o contextos.

3. **Dependencias transitivas:** Verificar que las dependencias declaradas no generen ciclos ni requieran documentos de oleadas futuras. Validar cronograma vs dependencias.

4. **Referencias cruzadas consistes:** Mantener coherencia entre backlog, roadmap, matriz de cumplimiento e inventario documental. Cualquier cambio en uno debe reflejarse en todos.

5. **Criterios de aceptación verificables:** Cada criterio debe incluir evidencia específica y artefacto de validación. Evitar términos vagos como "alineado", "integrado", "aprobado" sin contexto.

6. **Realismo en cronogramas:** Incluir buffers (10-15%), revisiones intermedias y consideración de disponibilidad de recursos. No asumir capacidad continua sin pausas.

7. **Auditoría de entregables:** Siempre usar el subagent `revisor-fase` al completar una fase con múltiples entregables complejos para detectar inconsistencias antes de continuar.

**Checklist pre-entrega de backlog/roadmap:**
- [ ] Total de documentos = objetivo declarado
- [ ] Códigos únicos (sin duplicados)
- [ ] Dependencias sin ciclos ni cruces de oleadas
- [ ] Cronograma respetando dependencias
- [ ] Recursos asignados solo incluyen documentos planificados
- [ ] Resúmenes de esfuerzo/cantidad correctos
- [ ] Criterios de aceptación con evidencia verificable
- [ ] Revisado por revisor-fase

## Files Affected

- `docs/docs_sgc/Backlog Priorizado de Documentos SGC.md` - Requiere corrección de códigos, dependencias, resúmenes
- `docs/docs_sgc/Roadmap de Implementación por Oleadas.md` - Requiere corrección de cronograma, Gantt, recursos asignados
- `logs/plans/260208_1932_plan_ajuste-sgc-17025-17043-13528.md` - Requiere actualización de hallazgos de Revisión 3 con correcciones implementadas

## Next Steps

1. Revisar inventario documental para identificar los 4 documentos faltantes
2. Normalizar códigos de formatos asignando códigos únicos (F-PSEA-05 al F-PSEA-11)
3. Reorganizar cronograma para respetar dependencias (P-PSEA-06 → P-PSEA-09, etc.)
4. Depurar "Recursos Asignados" eliminando documentos no planificados
5. Actualizar resúmenes de esfuerzo/cantidad
6. Mejorar criterios de aceptación con evidencia verificable
7. Añadir buffers y revisiones intermedias al cronograma
8. Ejecutar nueva revisión de fase con revisor-fase para validar correcciones
