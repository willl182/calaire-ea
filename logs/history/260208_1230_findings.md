# Technical Finding - Renderizado y Simplificación de Diagramas Mermaid

**Context**: Renderizado de diagramas Mermaid (Gantt y Timeline) para Informe Ejecutivo CALAIRE-EA

## El Hallazgo

Al renderizar diagramas Mermaid a PNG para incluirlos en el informe ejecutivo, se identificaron dos aspectos importantes:

1. **Dimensiones de renderizado**: El comando `mmdc` ajusta automáticamente la altura del PNG según el contenido del diagrama. Para especificar dimensiones en pulgadas (ej: 17" x 6"), se debe usar:
   - Ancho: 17" x 96px = 1632px
   - Alto: 6" x 96px = 576px
   - Comando: `mmdc -i gantt.md -o output.png -w 1632 -H 576`

2. **Simplificación de diagramas Gantt**: Para las rondas canceladas, las subactividades (recepción, acondicionamiento, pruebas, devolución) deben eliminarse completamente del código Mermaid, no solo reemplazar su nombre por ".". Mantener las duraciones sin nombre genera filas vacías en el diagrama.

## Solución Implementada

Para Rondas 1 y 2 (canceladas), el código Mermaid debe ser:

```mermaid
section Ronda 1 (CANCELLED) <br> Semana 1 <br> Feb 16-21
Ronda 1 (CANCELLED) :r1, 2026-02-16, 6d

section Ronda 2 (CANCELLED) <br> Semana 2 <br> Feb 23-28
Ronda 2 (CANCELLED) :r2, 2026-02-23, 6d
```

**Incorrecto** (mantiene subactividades vacías):
```mermaid
Ronda 1 (CANCELLED) :r1, 2026-02-16, 6d
. :r1_rec, 2026-02-18, 1d
. :r1_ac, 2026-02-18, 1d
...
```

## Archivos Modificados

1. `docs/gantt.md`
   - Eliminadas subactividades (recepción, acondicionamiento, pruebas, devolución) de Rondas 1 y 2
   - Solo se mantiene la línea principal de cada ronda cancelada

2. `docs/informes/gantt_piloto.png`
   - Regenerado con dimensiones aproximadas: 1616x1276px (132KB)

3. `docs/informes/timeline_piloto.png`
   - Regenerado con dimensiones aproximadas: 1616x1281px (208KB)

## Resultado

- Gantt reducido de 1564px a 1276px de altura (reducción de ~288px)
- Diagrama más limpio y legible sin filas vacías
- Dimensiones consistentes entre Gantt y Timeline (~1616x1280px)

## Aprendizaje

1. **mmdc ajusta altura automáticamente**: Especificar `-H` es un límite máximo, pero el diagrama puede renderizarse más bajo si el contenido es menos alto.

2. **Eliminación completa de subactividades**: Para simplificar secciones de Gantt, se deben eliminar todas las líneas de subactividades, no solo su contenido textual.

3. **Workflow de renderizado**:
   ```bash
   mmdc -i gantt.md -o output.png -w 1632 -H 576
   mv output-1.png output.png  # Renombrar si se genera con sufijo -1
   identify output.png  # Verificar dimensiones finales
   ```

4. **Práctica recomendada**: Mantener versiones simplificadas de diagramas para documentación formal (informes, presentaciones) y versiones detalladas para referencia técnica.
