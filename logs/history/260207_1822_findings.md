# Technical Finding / Milestone

**Context**: Mermaid Diagram Update - Pilot Test Schedule Restructuring

## The Discovery

Al actualizar los diagramas Mermaid (Gantt y Timeline) para reflejar el nuevo cronograma con Rondas 6, 7 y 8, se identificaron problemas críticos de sintaxis que prevenían el renderizado correcto de los diagramas.

## Key Issues Found and Resolved

### 1. IDs Únicos en Mermaid Gantt
**Problem:** El Gantt original reutilizaba los mismos IDs (`a1`-`a6`) en todas las rondas, lo cual provoca colisiones y render incorrecto en Mermaid.

**Solution:** Asignar IDs únicos por ronda y tarea:
- Ronda 1: `r1`, `r1_rec`, `r1_ac`, `r1_ini`, `r1_cont`, `r1_fin`, `r1_dev`
- Ronda 2: `r2`, `r2_rec`, `r2_ac`, etc.
- ...
- Ronda 8: `r8`, `r8_rec`, `r8_ac`, etc.

### 2. Milestones sin IDs
**Problem:** `Inicio Prueba Piloto` y `Fin Prueba Piloto` no tenían IDs definidos, causando errores de sintaxis.

**Solution:** Agregar sintaxis de milestone:
```mermaid
Inicio Prueba Piloto: milestone, m1, 2026-03-16, 0d
Fin Prueba Piloto: milestone, m2, 2026-05-04, 0d
```

### 3. Inconsistencia de Fechas
**Problem:** Timeline extendía hasta May 9, contradictiendo el requisito de terminar en May 4.

**Solution:** Ajustar timeline para terminar en May 4, eliminando fechas May 5-9.

### 4. Semanas "(vacía)" Superpuestas
**Problem:** Gantt tenía secciones marcadas como "(vacía)" que se superponían con R6-R8.

**Solution:** Renombrar secciones para reflejar Rondas 6, 7, 8 activas en lugar de vacías.

## Key Files Affected

- `docs/gantt.md` - Diagrama Gantt actualizado con IDs únicos, milestones correctos, y Rondas 6-8
- `docs/timeline.md` - Timeline extendido hasta May 4 con Rondas 6-8 y fechas correctas
- `logs/plans/260207_1741_plan_reestructuracion-cronograma-piloto.md` - Plan actualizado con hallazgos de Fase 4

## Best Practices for Mermaid Diagrams in This Project

1. **Use Unique IDs:** Never reuse task IDs across different sections of a Gantt chart.
2. **Milestones Require Format:** Use `milestone` keyword with explicit ID: `Task : milestone, id, date, 0d`
3. **Consistent Dates:** Ensure Gantt and Timeline use the same date ranges for rounds.
4. **Visual Cancellation:** Mark cancelled rounds with "(CANCELLED)" label and use `crit` modifier if needed for visibility.
5. **Section Naming:** Avoid "(vacía)" labels that contradict actual content; use descriptive names.

## Validation Checklist

- [x] All tasks have unique IDs
- [x] Milestones properly formatted with IDs
- [x] R1-R2 marked as "(CANCELLED)" in both diagrams
- [x] R6-R8 present in both diagrams
- [x] Both diagrams end on May 4 (not extended)
- [x] No "(vacía)" sections overlapping with active rounds
- [x] Date ranges consistent between Gantt and Timeline
