# Problem Record (Troubleshooting)

**Severity**: Alta

## The Problem

Durante la revisión de `docs/tags_project.csv` contra el uso real en el grafo Logseq, se detectaron múltiples inconsistencias y problemas de sintaxis que impiden el correcto funcionamiento del sistema de categorización de contenido por tags.

## Symptoms

### 1. Tags NO se están usando en journals

**Observación:** Los 35 tags definidos en `docs/tags_project.csv` están documentados en páginas MOC de categorías (Gestión Administrativa.md, Desarrollo Técnico.md, etc.) pero **nunca se aplican** a bloques en journals.

**Evidencia:**
```bash
# Búsqueda en journals/
[[Seguimiento...]]: 0 matches
[[TECH]...]: 0 matches
[[Finanzas...]]: 0 matches
[[EVENTO]...]: 0 matches
```

**Impacto:** El sistema de categorización existe solo en documentación teórica, no en uso práctico.

### 2. Sintaxis incorrecta: Triple corchete `[[[TAG]]]`

**Observación:** 12 tags usan `[[[TAG]]]` en lugar de `[[TAG]]`, lo cual Logseq NO interpreta como enlaces válidos. Son literales de texto.

**Evidencia:**

| Archivo | Líneas | Tags con error |
|---------|--------|---------------|
| `pages/Gestión Administrativa.md` | 21-22, 27-28 | `[[[ACCION] Aprobación]]`, `[[[ACCION] Decisión]]`, `[[[EVENTO] Socialización]]`, `[[[EVENTO] Congreso/Evento]]` |
| `pages/Desarrollo Técnico.md` | 18-19, 23 | `[[[TECH] Desarrollo App]]`, `[[[TECH] Calibración]]`, `[[[EVENTO] Capacitación]]` |
| `pages/Infraestructura.md` | 14-17 | `[[[INFRA] TI]]`, `[[[INFRA] Instalaciones]]`, `[[[INFRA] Transporte]]`, `[[[TECH] Ronda - Equipos]]` |

**Impacto:** Logseq no crea enlaces ni páginas para estos tags, rompiendo el sistema de categorización.

### 3. Tags SGC del CSV faltantes en MOCs

**Observación:** El CSV define 3 tags de categoría `[QMS]` que no están presentes en ningún MOC de categorías.

**Evidencia:**

| Tag del CSV | Ubicación esperada | Estado real |
|-------------|-------------------|-------------|
| `[[SGC] Auditoría]` | `pages/SGC Calidad.md` o `[[QMS]]` | **No existe** |
| `[[SGC] Procedimiento]` | `pages/SGC Calidad.md` o `[[QMS]]` | **No existe** |
| `[[SGC] Acreditación]` | `pages/SGC Calidad.md` o `[[QMS]]` | **No existe** |

**Impacto:** Inconsistencia entre definición y uso.

### 4. Inconsistencia de nombres SGC vs QMS

**Observación:** El CSV usa `[[SGC / Calidad]]` como nombre de categoría, pero el MOC real se llama `[[QMS]]` (Quality Management System).

**Evidencia:**
- `docs/tags_project.csv` línea 28: `[[SGC / Calidad]]`
- `pages/QMS.md` existe como página MOC
- Otros archivos referencia `[[QMS]]` (no `[[SGC / Calidad]]`)

**Impacto:** Confusión en documentación y posibles páginas duplicadas.

### 5. Tags con sintaxis correcta pero no usados

**Observación:** Algunos tags tienen sintaxis correcta `[[TAG]]` pero solo están documentados en MOCs, no usados en journals.

**Ejemplos:**
- `[[Finanzas - Cotización]]` ✓ (sintaxis correcta, 0 usos en journals)
- `[[Seguimiento - Entregable]]` ✓ (sintaxis correcta, 0 usos en journals)
- `[[Referencia - Notas]]` ✓ (sintaxis correcta, 0 usos en journals)

**Impacto:** Tags funcionales pero no implementados en práctica.

## User-Requested Corrections

**Requisito del usuario:** "quiero que revises si los tags en @docs/tags_project.csv se estan usando actualmente en logseq"

**Acción solicitada:** Análisis comparativo entre definición (CSV) y uso real (grafo Logseq).

## The Solution / Workaround

### Plan de Corrección Propuesto

Se creó `logs/plans/260208_2029_plan_correccion-sintaxis-tags.md` con 4 fases:

#### Fase 1: Corregir Sintaxis Triple Corchete → Doble Corchete

**Objetivo:** Convertir 12 tags con `[[[TAG]]]` a sintaxis válida `[[TAG]]`

**Acciones:**
1. Editar `pages/Gestión Administrativa.md` - líneas 21-22, 27-28
2. Editar `pages/Desarrollo Técnico.md` - líneas 18-19, 23
3. Editar `pages/Infraestructura.md` - líneas 14-17
4. Verificar con `grep '\[\[\[' pages/*.md` que no queden triples corchetes

#### Fase 2: Definir Convención SGC vs QMS

**Objetivo:** Documentar la convención de nombres entre `[[SGC / Calidad]]` (CSV) y `[[QMS]]` (página existente)

**Acciones:**
1. Crear sección "Convenciones de Nombres de Tags" en `ref/setup.md`
2. Definir que `[[QMS]]` es el nombre estándar del MOC
3. Documentar que tags de categoría usan `[[SGC]]` como prefijo para emails
4. Aclarar relación: `[[QMS]]` (página MOC) ↔ `[[SGC] ...]` (tags de correo)
5. Considerar actualizar CSV para usar `[[QMS]]` en lugar de `[[SGC / Calidad]]`

#### Fase 3: Agregar Tags Faltantes del CSV a MOCs

**Objetivo:** Agregar los 3 tags SGC del CSV que no existen en ningún MOC

**Acciones:**
- Decidir entre crear `pages/SGC Calidad.md` (página separada) o agregar tags a `[[QMS]]`
- Agregar `[[SGC] Auditoría]`, `[[SGC] Procedimiento]`, `[[SGC] Acreditación]`

**Recomendación:** Crear `pages/SGC Calidad.md` para separar tags SGC del MOC QMS.

#### Fase 4: Actualizar Documentación de Uso de Tags

**Objetivo:** Crear guía clara para aplicar tags en journals

**Acciones:**
1. Crear template `etiqueta` en `pages/templates.md` con ejemplo de uso
2. Documentar instrucciones: "Cuándo y cómo usar tags de correo"
3. Actualizar `AGENTS.md` con sección "Uso de Tags de Correo"
4. Agregar nota sobre sintaxis correcta (doble corchete, no triple)

## Learnings to Preserve

### 1. Sintaxis Logseq: Doble vs Triple Corchete

**Regla:** Logseq usa **doble corchete** `[[TAG]]` para enlaces. Triple corchete `[[[TAG]]` NO es sintaxis válida.

**Detección:** Usar `grep '\[\[\['` para encontrar triples corchetes.

**Corrección:** Reemplazar `[[[` por `[[` en todas las ocurrencias.

### 2. Documentación vs Uso Real

**Problema recurrente:** Definir sistemas en documentación pero no implementarlos en práctica.

**Prevención:**
- Verificar uso en journals con `grep` después de definir tags
- Crear templates con ejemplos de uso real
- Documentar "Cuándo aplicar" no solo "Qué es el tag"

### 3. Convenciones de Nombres

**Problema:** Inconsistencia entre nombres en CSV vs nombres en páginas.

**Prevención:**
- Documentar convenciones en `ref/setup.md` como fuente única de verdad
- Usar el mismo nombre en CSV y páginas
- Si hay sinónimos, documentar el mapeo explícitamente

### 4. Tags SGC vs QMS

**Decisión pendiente:** ¿Usar `[[QMS]]` o `[[SGC / Calidad]]`?

**Contexto:**
- `[[QMS]]` ya existe como página MOC
- `[[SGC / Calidad]]` está en CSV pero no en uso
- SGC = Sistema de Gestión de Calidad (español)
- QMS = Quality Management System (inglés)

**Recomendación:** Mantener `[[QMS]]` como página MOC y usar `[[SGC]` como prefijo para tags de categoría de correo.

## Root Cause Analysis

### Causas Principales

1. **Falta de validación de sintaxis:** Los triples corchetes se introdujeron sin verificar si Logseq los interpreta correctamente.

2. **Desconexión entre definición y uso:** El CSV se creó como catálogo teórico sin validar la implementación práctica en journals.

3. **Documentación incompleta:** No se documentó en `ref/setup.md` la convención de nombres ni ejemplos de uso de tags en journals.

4. **Falta de integración con workflow:** Los tags no se mencionan en `AGENTS.md` ni en templates, por lo tanto el agente y el usuario no los aplican.

## Risks

| Riesgo | Impacto | Mitigación |
|--------|---------|------------|
| Romper enlaces existentes | Bajo | Solo corregimos sintaxis `[[[` → `[[`, no cambiamos nombres de tags |
| Inconsistencia persistente | Medio | Documentar convención clara en `ref/setup.md` |
| Tags nunca se usan en journals | Alto | Incluir ejemplo de uso en `templates.md` y `AGENTS.md` |
| Crear página duplicada SGC/QMS | Medio | Decidir antes de crear: ¿página separada o tags en `[[QMS]]`? |

## Next Steps

1. **Usuario**: Aprobar plan `logs/plans/260208_2029_plan_correccion-sintaxis-tags.md`
2. **Agente**: Ejecutar Fase 1 (corrección de 12 tags)
3. **Agente**: Ejecutar Fase 2 (documentar convención SGC vs QMS)
4. **Agente**: Ejecutar Fase 3 (agregar 3 tags SGC faltantes)
5. **Agente**: Ejecutar Fase 4 (actualizar documentación de uso)
6. **Agente**: Ejecutar revisión con `revisor-fase` después de cada fase
7. **Usuario**: Validar que los tags ahora se aplican correctamente en journals

## References

- `docs/tags_project.csv` - Definición original de 35 tags
- `logs/plans/260208_2029_plan_correccion-sintaxis-tags.md` - Plan de corrección (pendiente aprobación)
- `logs/history/260205_0133_findings.md` - Hallazgos previos sobre tags (líneas 150-156)
- `ref/setup.md` - Guía de configuración y convenciones (por actualizar)
